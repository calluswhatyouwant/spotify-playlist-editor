{"version":3,"sources":["app/Auth.js","home/Home.js","app/Navbar.js","create-playlist/PlaylistCreationOption.js","create-playlist/PlaylistCreationPage.js","playlist/PlaylistTrackList.js","playlist/sorting.js","playlist/PlaylistSortDropdownMenu.js","playlist/PlaylistPage.js","user/UserPageHeader.js","user/UserPlaylistCreationPageSection.js","user/UserPlaylistList.js","user/UserPage.js","app/App.js","index.js"],"names":["Auth","props","_this","Object","classCallCheck","this","_super","call","state","token","history","location","hash","match","localStorage","setItem","react_default","a","createElement","react_router","to","Component","SocialButton","_ref","href","text","type","className","concat","buildAuthUrl","encodeQueryParams","client_id","response_type","redirect_uri","scope","params","keys","map","param","encodeURIComponent","join","Home","Home_SocialButton","NavbarContent","id","react_router_dom","Navbar","data-toggle","data-target","aria-controls","aria-expanded","aria-label","Navbar_NavbarContent","PlaylistCreationOption","handleClick","onClick","PlaylistCreationPage","getRecentlyPlayedTracks","getCurrentUserRecentlyPlayedTracks","limit","then","recentTracks","items","item","track","getTopTracks","getCurrentUserTopTracks","time_range","tracks","createPlaylist","asyncToGenerator","_regeneratorRuntime","mark","_callee","user","trackUris","newPlaylist","wrap","_context","prev","next","t0","sent","uri","description","addTracksToPlaylist","setState","redirect","stop","_x","apply","arguments","_this2","init","getItem","getCurrentUserProfile","_this3","options","create_playlist_PlaylistCreationOption","PlaylistTrackListItem","_ref2","playlistTrack","src","album","imageUrl","alt","albumName","name","stringArtists","PlaylistTrackList","loading","PlaylistTrackList_PlaylistTrackListItem","key","sortingAttributes","attribute","sortPlaylistTracksByAttribute","sorting_regeneratorRuntime","_callee2","playlistId","inverted","insertionOrder","_context2","includes","replace","getInsertionOrder","abrupt","reduce","previousPromise","current","moveTrackToTop","_x4","_x5","Promise","resolve","_x2","_x3","_ref3","_callee3","playlistTracks","trackRefs","sortedTrackRefs","_context3","getPlaylistTracks","index","_","get","sortBy","reverse","trackRef","updateIndexes","_x6","_x7","_x8","_x9","array","i","length","j","oldIndex","reorderPlaylistTracks","rangeLength","insertBefore","PlaylistSortDropdownMenu","sortingButtons","aria-haspopup","aria-labelledby","PlaylistPage","_this$state","playlist","totalTracks","getPlaylist","_this$state2","playlist_PlaylistSortDropdownMenu","src_playlist_PlaylistTrackList","UserPageHeader","images","url","displayName","UserPlaylistCreationPageSection","UserPlaylistListItem","collaborative","public","UserPlaylistList","playlists","hasNextPage","playlistListItems","UserPlaylistList_UserPlaylistListItem","loadMoreButton","UserPage","componentDidMount","UserPage_regeneratorRuntime","page","getCurrentUserPlaylists","loadMorePlaylists","nextPage","getNextPage","prevState","userPlaylists","filter","owner","user_UserPageHeader","user_UserPlaylistCreationPageSection","src_user_UserPlaylistList","hasNext","App","Fragment","app_Navbar","exact","path","component","rootElement","document","getElementById","ReactDOM","render","basename","process","app_App"],"mappings":"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","file":"static/js/main.e6a21203.chunk.js","sourcesContent":["/* @flow */\n\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\ntype Props = {\n    history: any,\n};\n\ntype State = {\n    token: string,\n};\n\nclass Auth extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            token: props.history.location.hash.match(\n                '[#&]access_token=([^&]*)'\n            )[1],\n        };\n    }\n\n    componentDidMount() {\n        localStorage.setItem('token', this.state.token);\n    }\n\n    render() {\n        if (this.state.token) {\n            return <Redirect to=\"/playlists\" />;\n        } else {\n            return <Redirect to=\"/\" />;\n        }\n    }\n}\n\nexport default Auth;\n","/* @flow */\n\nimport React from 'react';\n\nimport './Home.css';\n\nconst Home = () => (\n    <div className=\"home\">\n        <div className=\"container text-center\">\n            <h1 className=\"display-1\">Spotify Playlist Editor</h1>\n            <h4>Sort your playlists any way you want.</h4>\n            <p>\n                Note this is still a work in progress, so use it with caution!\n            </p>\n            <SocialButton\n                href={buildAuthUrl()}\n                text=\"Connect to Spotify\"\n                type=\"spotify\"\n            />\n            <SocialButton\n                href=\"https://github.com/calluswhatyouwant/spotify-playlist-editor\"\n                text=\"Source code\"\n                type=\"github\"\n            />\n        </div>\n    </div>\n);\n\ntype SocialButtonProps = {\n    href: string,\n    text: string,\n    type: 'spotify' | 'github',\n};\n\nconst SocialButton = ({ href, text, type }: SocialButtonProps) => (\n    <a className=\"btn btn-lg btn-outline-light my-2 mx-1\" href={href}>\n        <i className={`fab fa-${type}`} /> {text}\n    </a>\n);\n\nconst buildAuthUrl = () => {\n    const params = {\n        client_id: '77edb9a2465445fc8b366da5105e7add',\n        response_type: 'token',\n        redirect_uri:\n            process.env.NODE_ENV === 'development'\n                ? 'http://localhost:3000/auth'\n                : 'https://calluswhatyouwant.github.io/spotify-playlist-editor/auth',\n        scope: `playlist-read-private playlist-read-collaborative playlist-modify-public\n            playlist-modify-private user-read-recently-played user-top-read`,\n    };\n    return `https://accounts.spotify.com/authorize?${encodeQueryParams(\n        params\n    )}`;\n};\n\nconst encodeQueryParams = params =>\n    Object.keys(params)\n        .map(\n            param =>\n                `${encodeURIComponent(param)}=${encodeURIComponent(\n                    params[param]\n                )}`\n        )\n        .join('&');\n\nexport default Home;\n","/* @flow */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Navbar = () => (\n    <nav className=\"navbar fixed-top navbar-expand-lg navbar-light bg-light\">\n        <Link className=\"navbar-brand\" to=\"/\">\n            Spotify Playlist Editor\n        </Link>\n        <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-toggle=\"collapse\"\n            data-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n        >\n            <span className=\"navbar-toggler-icon\" />\n        </button>\n        <NavbarContent />\n    </nav>\n);\n\nconst NavbarContent = () => (\n    <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item active\">\n                <Link className=\"nav-link\" to=\"/playlists\">\n                    Playlists\n                </Link>\n            </li>\n        </ul>\n    </div>\n);\n\nexport default Navbar;\n","/* @flow */\n\nimport React from 'react';\n\ntype Props = {\n    handleClick: ('recent' | 'top') => any,\n    type: 'recent' | 'top',\n};\n\nconst PlaylistCreationOption = ({ handleClick, type }: Props) => (\n    <div>\n        <h3>With your {type} tracks</h3>\n        <div className=\"center-wrapper\">\n            <button\n                className=\"btn btn-dark btn-purple px-4\"\n                onClick={() => handleClick(type)}\n            >\n                <h4 className=\"mb-0\">CREATE PLAYLIST</h4>\n            </button>\n        </div>\n        <hr className=\"my-4\" />\n    </div>\n);\n\nexport default PlaylistCreationOption;\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport {\n    createPlaylist,\n    init,\n    getCurrentUserProfile,\n    PrivateUser,\n    addTracksToPlaylist,\n    getCurrentUserRecentlyPlayedTracks,\n    getCurrentUserTopTracks,\n} from 'spotify-web-sdk';\n\nimport PlaylistCreationOption from './PlaylistCreationOption';\n\ntype State = {\n    redirect: boolean,\n    user: PrivateUser,\n};\n\nclass PlaylistCreationPage extends Component<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            redirect: false,\n            user: {},\n        };\n    }\n\n    componentDidMount() {\n        init({ token: localStorage.getItem('token') });\n        getCurrentUserProfile().then(user => {\n            this.setState({ user });\n        });\n    }\n\n    getRecentlyPlayedTracks = () => {\n        return getCurrentUserRecentlyPlayedTracks({\n            limit: 50,\n        }).then(recentTracks => recentTracks.items.map(item => item.track));\n    };\n\n    getTopTracks = () => {\n        return getCurrentUserTopTracks({\n            limit: 50,\n            time_range: 'long_term',\n        }).then(tracks => tracks.items);\n    };\n\n    createPlaylist = async (type: 'top' | 'recent') => {\n        const { user } = this.state;\n        const tracks =\n            type === 'top'\n                ? await this.getTopTracks()\n                : await this.getRecentlyPlayedTracks();\n        const trackUris = tracks.map(track => track.uri);\n        const newPlaylist = await createPlaylist(user.id, 'Testing', {\n            description: \"Created with calluswhatyouwant's playlist editor.\",\n        });\n        addTracksToPlaylist(newPlaylist.id, trackUris).then(() =>\n            this.setState({ redirect: true })\n        );\n    };\n\n    render() {\n        const { redirect } = this.state;\n        const options = ['recent', 'top'].map(type => (\n            <PlaylistCreationOption\n                handleClick={this.createPlaylist}\n                type={type}\n            />\n        ));\n\n        return redirect ? (\n            <Redirect to=\"/playlists\" />\n        ) : (\n            <div className=\"playlist-page container mb-4 p-4 shadow\">\n                <h1 className=\"mb-4\">Create a new playlist...</h1>\n                {options}\n            </div>\n        );\n    }\n}\n\nexport default PlaylistCreationPage;\n","/* @flow */\n\nimport React from 'react';\nimport { PlaylistTrack, TrackSimplified } from 'spotify-web-sdk';\n\nimport './PlaylistTrackList.css';\n\ntype Props = {\n    loading: boolean,\n    tracks: TrackSimplified[],\n};\n\nconst PlaylistTrackList = ({ loading, tracks }: Props) => (\n    <div>\n        <h3 className=\"mt-3\">Tracks</h3>\n        <ul className=\"list-unstyled\">\n            {loading ? (\n                <h4 className=\"text-center\">\n                    A little bit of patience now...{' '}\n                    <i className=\"fas fa-circle-notch spinner\" />\n                </h4>\n            ) : (\n                tracks.map(track => (\n                    <PlaylistTrackListItem\n                        key={track.id}\n                        playlistTrack={track}\n                    />\n                ))\n            )}\n        </ul>\n    </div>\n);\n\ntype ItemProps = {\n    playlistTrack: PlaylistTrack,\n};\n\nconst PlaylistTrackListItem = ({ playlistTrack }: ItemProps) => {\n    const { track } = playlistTrack;\n    return (\n        <li className=\"media\">\n            <img\n                className=\"playlist-img mr-3\"\n                src={track.album.imageUrl}\n                alt={track.albumName}\n            />\n            <div className=\"media-body\">\n                <h5 className=\"mt-0 mb-1\">\n                    <b>{track.name}</b>\n                </h5>\n                <p>{track.stringArtists}</p>\n            </div>\n        </li>\n    );\n};\n\nexport default PlaylistTrackList;\n","/* @flow */\n\nimport _ from 'lodash';\nimport {\n    init,\n    getPlaylistTracks,\n    reorderPlaylistTracks,\n} from 'spotify-web-sdk';\n\nconst invert = '_inverted';\nexport const sortingAttributes = [\n    { description: 'name', attribute: 'track.name' },\n    { description: 'artist name', attribute: 'track.stringArtists' },\n    { description: 'album name', attribute: 'track.albumName' },\n    { description: 'length', attribute: 'track.durationMs' },\n    { description: 'release date', attribute: 'track.album.releaseDate' },\n    { description: 'popularity', attribute: 'track.popularity' },\n    { description: 'addition date', attribute: 'addedAt' },\n    { description: 'inverted date', attribute: 'addedAt' + invert },\n];\n\nexport const sortPlaylistTracksByAttribute = async (\n    playlistId: string,\n    limit: number,\n    attribute: string\n) => {\n    init({ token: localStorage.getItem('token') });\n\n    let inverted = false;\n    if (attribute.includes(invert)) {\n        attribute = attribute.replace(invert, '');\n        inverted = true;\n    }\n    let insertionOrder = await getInsertionOrder(\n        playlistId,\n        limit,\n        attribute,\n        inverted\n    );\n    return insertionOrder.reduce(async (previousPromise, current) => {\n        await previousPromise;\n        return moveTrackToTop(playlistId, current);\n    }, Promise.resolve());\n};\n\nconst getInsertionOrder = async (\n    playlistId: string,\n    limit: number,\n    attribute: string,\n    inverted: boolean\n) => {\n    const playlistTracks = await getPlaylistTracks(playlistId, { limit });\n    const trackRefs = playlistTracks.items.map((item, index) => ({\n        index,\n        attribute: _.get(item, attribute),\n    }));\n    const sortedTrackRefs = inverted\n        ? _.sortBy(trackRefs, 'attribute')\n        : _.sortBy(trackRefs, 'attribute').reverse();\n    const insertionOrder = sortedTrackRefs.map(trackRef => trackRef.index);\n    return updateIndexes(insertionOrder);\n};\n\nconst updateIndexes = (array: number[]) => {\n    for (let i = 0; i < array.length; i++) {\n        for (let j = i + 1; j < array.length; j++) {\n            if (array[i] > array[j]) array[j] += 1;\n        }\n    }\n    return array;\n};\n\nconst moveTrackToTop = (id: string, oldIndex: number) =>\n    reorderPlaylistTracks(id, oldIndex, { rangeLength: 1, insertBefore: 0 });\n","/* @flow */\n\nimport React from 'react';\n\nimport { sortingAttributes } from './sorting';\n\ntype Props = {\n    handleClick: (attribute: string) => void,\n};\n\nconst PlaylistSortDropdownMenu = ({ handleClick }: Props) => {\n    const sortingButtons = sortingAttributes.map(\n        ({ attribute, description }) => (\n            <button\n                className=\"text-uppercase dropdown-item\"\n                onClick={() => handleClick(attribute)}\n            >\n                {description}\n            </button>\n        )\n    );\n    return (\n        <div className=\"dropdown\">\n            <button\n                className=\"btn btn-dark dropdown-toggle\"\n                id=\"dropdownMenuButton\"\n                data-toggle=\"dropdown\"\n                aria-haspopup=\"true\"\n                aria-expanded=\"false\"\n            >\n                SORT PLAYLIST BY\n            </button>\n            <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                {sortingButtons}\n            </div>\n        </div>\n    );\n};\n\nexport default PlaylistSortDropdownMenu;\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport { init, getPlaylist, Playlist } from 'spotify-web-sdk';\n\nimport PlaylistTrackList from './PlaylistTrackList';\nimport PlaylistSortDropdownMenu from './PlaylistSortDropdownMenu';\n\nimport { sortPlaylistTracksByAttribute } from './sorting';\n\nimport './PlaylistPage.css';\n\ntype Props = {\n    match: any,\n};\n\ntype State = {\n    playlistId: string,\n    playlist: Playlist,\n    loading: boolean,\n};\n\nclass PlaylistPage extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            playlist: {},\n            playlistId: props.match.params.id,\n            loading: false,\n        };\n    }\n\n    componentDidMount() {\n        init({ token: localStorage.getItem('token') });\n        getPlaylist(this.state.playlistId).then(playlist =>\n            this.setState({ playlist })\n        );\n    }\n\n    handleClick = (attribute: string) => {\n        const { playlist, playlistId } = this.state;\n        this.setState({ loading: true });\n        sortPlaylistTracksByAttribute(\n            playlistId,\n            playlist.totalTracks,\n            attribute\n        ).then(() =>\n            getPlaylist(playlistId).then(playlist =>\n                this.setState({ playlist, loading: false })\n            )\n        );\n    };\n\n    render() {\n        const { playlist, loading } = this.state;\n\n        return playlist.name ? (\n            <div className=\"playlist-page container mb-4 p-4 shadow\">\n                <h1 className=\"mb-4\">{playlist.name}</h1>\n                <PlaylistSortDropdownMenu handleClick={this.handleClick} />\n                <PlaylistTrackList\n                    loading={loading}\n                    tracks={playlist.tracks.items}\n                />\n            </div>\n        ) : null;\n    }\n}\n\nexport default PlaylistPage;\n","/* @flow */\n\nimport React from 'react';\nimport { PrivateUser } from 'spotify-web-sdk';\n\ntype HeaderProps = {\n    user: PrivateUser,\n};\n\nconst UserPageHeader = ({ user }: HeaderProps) => (\n    <div className=\"user-page-header media p-3\">\n        <img\n            src={user.images ? user.images[0].url : ''}\n            alt=\"Avatar\"\n            className=\"user-image rounded-circle align-self-center\"\n        />\n        <div className=\"media-body align-self-center\">\n            <h1 className=\"text-center py-4 display-4\">\n                Welcome, {user.displayName}!\n            </h1>\n        </div>\n    </div>\n);\n\nexport default UserPageHeader;\n","/* @flow */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst UserPlaylistCreationPageSection = () => (\n    <section className=\"mb-3\">\n        <h2>Create a new playlist</h2>\n        <p>\n            Highly recommended for testing, so that you don't overwrite your own\n            playlists.\n        </p>\n        <div className=\"center-wrapper\">\n            <Link className=\"btn btn-dark btn-purple mx-1\" to=\"/playlists/new\">\n                <h4 className=\"px-3 mb-0\">CREATE A NEW PLAYLIST</h4>\n            </Link>\n        </div>\n    </section>\n);\n\nexport default UserPlaylistCreationPageSection;\n","/* @flow */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { PlaylistSimplified } from 'spotify-web-sdk';\n\nimport './UserPlaylistList.css';\n\ntype Props = {\n    playlists: PlaylistSimplified[],\n    handleClick: () => void,\n    hasNextPage: boolean,\n};\n\nconst UserPlaylistList = ({ playlists, handleClick, hasNextPage }: Props) => {\n    const playlistListItems = playlists.map(playlist => (\n        <UserPlaylistListItem playlist={playlist} />\n    ));\n\n    const loadMoreButton = (\n        <div className=\"center-wrapper\">\n            <button className=\"btn btn-dark btn-purple\" onClick={handleClick}>\n                <h4 className=\"px-3 mb-0\">LOAD MORE PLAYLISTS</h4>\n            </button>\n        </div>\n    );\n\n    return (\n        <div>\n            <h2 className=\"mb-4\">These are your playlists</h2>\n            {playlistListItems}\n            {hasNextPage && loadMoreButton}\n        </div>\n    );\n};\n\ntype ItemProps = {\n    playlist: PlaylistSimplified,\n};\n\nconst UserPlaylistListItem = ({ playlist }: ItemProps) => (\n    <div className=\"user-playlist\">\n        <h4>\n            {playlist.name}\n            <Link\n                className=\"badge badge-pill badge-dark mx-1\"\n                to={`/playlists/${playlist.id}`}\n            >\n                SORT / MANAGE\n            </Link>\n        </h4>\n        <h5>\n            <span className=\"badge badge-info mr-1\">\n                {playlist.totalTracks} tracks\n            </span>\n            <span className=\"badge badge-secondary\">\n                {playlist.collaborative\n                    ? 'COLLABORATIVE'\n                    : playlist.public\n                    ? 'PUBLIC'\n                    : 'PRIVATE'}\n            </span>\n        </h5>\n        <hr className=\"my-4\" />\n    </div>\n);\n\nexport default UserPlaylistList;\n","/* @flow */\n\nimport React, { Component } from 'react';\nimport {\n    init,\n    getCurrentUserPlaylists,\n    getCurrentUserProfile,\n    Page,\n    PlaylistSimplified,\n    PrivateUser,\n} from 'spotify-web-sdk';\n\nimport UserPageHeader from './UserPageHeader';\nimport UserPlaylistCreationPageSection from './UserPlaylistCreationPageSection';\nimport UserPlaylistList from './UserPlaylistList';\n\nimport './UserPage.css';\n\ntype Props = {\n    history: any,\n};\n\ntype State = {\n    page: Page<PlaylistSimplified>,\n    playlists: PlaylistSimplified[],\n    user: PrivateUser,\n};\n\nclass UserPage extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            page: {},\n            playlists: [],\n            user: {},\n        };\n    }\n\n    componentDidMount = async () => {\n        init({ token: localStorage.getItem('token') });\n        const page = await getCurrentUserPlaylists({ limit: 5 });\n        const user = await getCurrentUserProfile();\n        this.setState({\n            page,\n            user,\n            playlists: page.items,\n        });\n    };\n\n    loadMorePlaylists = async () => {\n        const { page } = this.state;\n        const nextPage = await page.getNextPage();\n        this.setState(prevState => {\n            const playlists = prevState.playlists.concat(nextPage.items);\n            return { playlists, page: nextPage };\n        });\n    };\n\n    render() {\n        const { playlists, page, user } = this.state;\n        const userPlaylists = playlists.filter(\n            playlist => playlist.owner.id === user.id\n        );\n\n        return page.items ? (\n            <div className=\"user-page container mb-4 p-4 shadow\">\n                <UserPageHeader user={user} />\n                <UserPlaylistCreationPageSection />\n                <UserPlaylistList\n                    playlists={userPlaylists}\n                    handleClick={this.loadMorePlaylists}\n                    hasNextPage={page.hasNext()}\n                />\n            </div>\n        ) : null;\n    }\n}\n\nexport default UserPage;\n","/* @flow */\n\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport Auth from './Auth';\nimport Home from '../home/Home';\nimport Navbar from './Navbar';\nimport PlaylistCreationPage from '../create-playlist/PlaylistCreationPage';\nimport PlaylistPage from '../playlist/PlaylistPage';\nimport UserPage from '../user/UserPage';\n\nconst App = () => (\n    <>\n        <Navbar />\n        <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/auth\" component={Auth} />\n            <Route exact path=\"/playlists\" component={UserPage} />\n            <Route\n                exact\n                path=\"/playlists/new\"\n                component={PlaylistCreationPage}\n            />\n            <Route exact path=\"/playlists/:id\" component={PlaylistPage} />\n        </Switch>\n    </>\n);\n\nexport default App;\n","/* @flow */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './app/App';\n\nimport './index.css';\n\nconst rootElement = document.getElementById('root');\n\nif (rootElement) {\n    ReactDOM.render(\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\n            <App />\n        </BrowserRouter>,\n        rootElement\n    );\n}\n"],"sourceRoot":""}